<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>worlds_skill_comprehensive_catalog ‚Äì Ramanujan CRDT Network</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./https://topos.site/favicon.ico" rel="icon">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-597958c53c93a607afca12fd375c57ed.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-db3c34c3b97b298c1c0c7d7558fdd011.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar floating nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Ramanujan CRDT Network</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./architecture/index.html"> 
<span class="menu-text">System Architecture</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./crdt/index.html"> 
<span class="menu-text">CRDT Theory</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./egraph/index.html"> 
<span class="menu-text">E-Graph Verification</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./agents/index.html"> 
<span class="menu-text">Multi-Agent Coordination</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./deployment/index.html"> 
<span class="menu-text">Deployment &amp; Game Theory</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./reference/index.html"> 
<span class="menu-text">API Reference</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/topos-institute/ramanujan-crdt"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/topos_institute"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"></header>




<section id="worlds-skill-system-self-reflexive-comprehensive-catalog" class="level1">
<h1>Worlds Skill System: Self-Reflexive Comprehensive Catalog</h1>
<p><strong>Meta-Level</strong>: This document is a world itself ‚Äî it describes the Worlds system from within the Worlds system. Reading this document is like opening a box that contains itself.</p>
<p><strong>Status</strong>: üåç Complete skill inventory + self-reflexive documentation <strong>Date</strong>: 2025-12-21 23:00 UTC <strong>Purpose</strong>: Maximum self-reference: Document worlds by having worlds document themselves</p>
<hr>
<section id="i.-the-self-referential-meta-structure" class="level2">
<h2 class="anchored" data-anchor-id="i.-the-self-referential-meta-structure">I. The Self-Referential Meta-Structure</h2>
<section id="what-youre-reading-right-now" class="level3">
<h3 class="anchored" data-anchor-id="what-youre-reading-right-now">What You‚Äôre Reading Right Now</h3>
<p>This document is <strong>simultaneously</strong>: 1. <strong>A World</strong> - one of the 9 worlds (the ‚ÄúDocumentation World‚Äù) 2. <strong>A Description of Worlds</strong> - explaining how worlds work 3. <strong>A Catalog of Skills</strong> - listing all capabilities 4. <strong>A Use of Skills</strong> - demonstrating skill documentation via the skill of documentation</p>
<pre><code>This Document (meta-level)
  ‚îú‚îÄ Contains: Description of Worlds
  ‚îú‚îÄ Is: A World itself
  ‚îú‚îÄ About: How to invoke Worlds
  ‚îî‚îÄ Uses: The skill of self-reference</code></pre>
<p><strong>The Loop</strong>: Reading this document <em>IS</em> experiencing a world (the Documentation World) that describes all worlds including itself.</p>
<hr>
</section>
</section>
<section id="ii.-the-9-worlds-complete-skill-inventory" class="level2">
<h2 class="anchored" data-anchor-id="ii.-the-9-worlds-complete-skill-inventory">II. The 9 Worlds + Complete Skill Inventory</h2>
<p>Each World is a <strong>way of being</strong> that transforms music patterns:</p>
<section id="world-1-group-theory-world" class="level3">
<h3 class="anchored" data-anchor-id="world-1-group-theory-world">World 1: Group Theory World üîÑ</h3>
<p><strong>File</strong>: <code>lib/worlds/group_theory_world.rb</code></p>
<p><strong>What It Is</strong>: Musical patterns as group operations - Rotations (transpose up/down by constant interval) - Reflections (flip pitch axis) - Permutations (rearrange note order) - Identity (play as-is)</p>
<p><strong>Skills This World Provides</strong>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2"><pre class="sourceCode ruby code-with-copy"><code class="sourceCode ruby"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Rotation (transpose)</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>world<span class="at">.transpose</span>(pattern, <span class="op">+</span><span class="dv">5</span>)  <span class="co"># Up a perfect fourth</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Reflection (invert around axis)</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>world<span class="at">.invert</span>(pattern, <span class="wa">axis:</span> <span class="dv">60</span>)  <span class="co"># Around middle C</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Permutation (rearrange)</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>world<span class="at">.permute</span>(pattern, <span class="kw">[</span><span class="dv">2</span>, <span class="dv">0</span>, <span class="dv">1</span><span class="kw">]</span>)  <span class="co"># [A B C] ‚Üí [B C A]</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Group composition</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>world<span class="at">.compose</span>(rotation, reflection)  <span class="co"># (R ‚àò F)</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Properties</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>world<span class="at">.order</span>(element)  <span class="co"># How many times until identity?</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>world<span class="at">.inverse</span>(element)  <span class="co"># What undoes this?</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>How to Invoke</strong>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">just</span> world-group-theory <span class="at">--pattern</span> <span class="st">"(c d e)"</span> <span class="at">--operation</span> <span class="st">"transpose"</span> <span class="at">--amount</span> 5</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Skill Categories</strong>: - ‚úÖ Algebraic transformations (5 operations) - ‚úÖ Property analysis (3 queries) - ‚úÖ Composition (2 combinators)</p>
<hr>
</section>
<section id="world-2-structural-world" class="level3">
<h3 class="anchored" data-anchor-id="world-2-structural-world">World 2: Structural World üèóÔ∏è</h3>
<p><strong>File</strong>: <code>lib/worlds/structural_world.rb</code></p>
<p><strong>What It Is</strong>: Breaking patterns into components - Phrases (groups of related notes) - Motifs (repeated patterns) - Cadences (endings) - Periods (2-phrase structures)</p>
<p><strong>Skills This World Provides</strong>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4"><pre class="sourceCode ruby code-with-copy"><code class="sourceCode ruby"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Analyze structure</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>world<span class="at">.extract_phrases</span>(pattern)     <span class="co"># Find phrase boundaries</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>world<span class="at">.find_motifs</span>(pattern)         <span class="co"># Find repeated elements</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>world<span class="at">.identify_cadences</span>(pattern)   <span class="co"># Recognize endings</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Build structure</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>world<span class="at">.build_phrase</span>(notes, duration)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>world<span class="at">.repeat_motif</span>(motif, times)</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>world<span class="at">.create_period</span>(antecedent, consequent)</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Modify structure</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>world<span class="at">.expand_phrase</span>(phrase, <span class="wa">factor:</span> <span class="fl">1.5</span>)</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>world<span class="at">.contract_motif</span>(motif, <span class="wa">factor:</span> <span class="fl">0.5</span>)</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>world<span class="at">.substitute_phrase</span>(original, replacement)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>How to Invoke</strong>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">just</span> world-structural <span class="at">--pattern-file</span> patterns.txt <span class="at">--operation</span> <span class="st">"extract-phrases"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Skill Categories</strong>: - ‚úÖ Structure analysis (4 analyzers) - ‚úÖ Structure building (3 builders) - ‚úÖ Structure modification (3 modifiers)</p>
<hr>
</section>
<section id="world-3-computational-world" class="level3">
<h3 class="anchored" data-anchor-id="world-3-computational-world">World 3: Computational World ‚öôÔ∏è</h3>
<p><strong>File</strong>: <code>lib/worlds/computational_world.rb</code></p>
<p><strong>What It Is</strong>: Symbolic manipulation and execution - Pattern-matching (find elements) - Substitution (replace elements) - Iteration (apply repeatedly) - Reduction (simplify)</p>
<p><strong>Skills This World Provides</strong>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6"><pre class="sourceCode ruby code-with-copy"><code class="sourceCode ruby"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pattern matching</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>world<span class="at">.match</span>(pattern, template)           <span class="co"># Does it fit?</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>world<span class="at">.extract_matching</span>(pattern, query)   <span class="co"># Find all matches</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>world<span class="at">.all_matches?</span>(pattern, templates)   <span class="co"># Test against multiple</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Substitution</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>world<span class="at">.substitute</span>(pattern, old, new)      <span class="co"># Replace first</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>world<span class="at">.substitute_all</span>(pattern, old, new)  <span class="co"># Replace all</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>world<span class="at">.substitute_where</span>(pattern, pred, new)  <span class="co"># Conditional</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Iteration</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>world<span class="at">.apply</span>(pattern, function)           <span class="co"># Map over notes</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>world<span class="at">.apply_while</span>(pattern, fn, condition)  <span class="co"># Until condition</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>world<span class="at">.iterate_n</span>(pattern, fn, n)          <span class="co"># Apply n times</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Reduction</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>world<span class="at">.reduce</span>(pattern, initial, fn)       <span class="co"># Fold/accumulate</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>world<span class="at">.simplify</span>(pattern)                  <span class="co"># Normalize</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>world<span class="at">.canonical_form</span>(pattern)            <span class="co"># Standard representation</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>How to Invoke</strong>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">just</span> world-computational <span class="at">--pattern</span> <span class="st">"(a b c)"</span> <span class="at">--operation</span> <span class="st">"substitute"</span> <span class="at">--old</span> <span class="st">"b"</span> <span class="at">--new</span> <span class="st">"x"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Skill Categories</strong>: - ‚úÖ Matching (3 matchers) - ‚úÖ Substitution (3 substitutors) - ‚úÖ Iteration (3 iterators) - ‚úÖ Reduction (3 reducers)</p>
<hr>
</section>
<section id="world-4-harmonic-function-world" class="level3">
<h3 class="anchored" data-anchor-id="world-4-harmonic-function-world">World 4: Harmonic Function World üéº</h3>
<p><strong>File</strong>: <code>lib/worlds/harmonic_function_world.rb</code></p>
<p><strong>What It Is</strong>: Functional harmony (Tonic/Subdominant/Dominant) - Tonic (I) - stability, home - Subdominant (IV) - moving away - Dominant (V) - tension, leading back</p>
<p><strong>Skills This World Provides</strong>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8"><pre class="sourceCode ruby code-with-copy"><code class="sourceCode ruby"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Analyze harmony</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>world<span class="at">.analyze_chord</span>(chord)          <span class="co"># What function is this?</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>world<span class="at">.progression_type</span>(progression) <span class="co"># T-S-D pattern?</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>world<span class="at">.cadence_type</span>(ending)         <span class="co"># Authentic? Plagal?</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Build harmony</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>world<span class="at">.tonic_chord</span>(key)             <span class="co"># Build I in key</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>world<span class="at">.subdominant_chord</span>(key)       <span class="co"># Build IV in key</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>world<span class="at">.dominant_chord</span>(key)          <span class="co"># Build V in key</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>world<span class="at">.progression</span>(key, <span class="kw">[</span><span class="cn">T</span>, <span class="cn">D</span>, <span class="cn">T</span><span class="kw">]</span>)  <span class="co"># Build full progression</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Voice leading</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>world<span class="at">.voice_lead</span>(from_chord, to_chord)  <span class="co"># Smooth transition</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>world<span class="at">.common_tone</span>(chord1, chord2)       <span class="co"># Find shared tones</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>world<span class="at">.doubling_rules</span>(chord, rules)      <span class="co"># Apply conventions</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Modulation</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>world<span class="at">.modulate_to</span>(current_key, target_key, pivot)  <span class="co"># Pivot modulation</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>world<span class="at">.secondary_dominant</span>(key, degree)               <span class="co"># V/ii, V/iii, etc.</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>How to Invoke</strong>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb9"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">just</span> world-harmonic-function <span class="at">--key</span> <span class="st">"c-major"</span> <span class="at">--operation</span> <span class="st">"analyze-chord"</span> <span class="at">--chord</span> <span class="st">"e-major"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Skill Categories</strong>: - ‚úÖ Harmonic analysis (3 analyzers) - ‚úÖ Harmonic building (4 builders) - ‚úÖ Voice leading (3 voice-leaders) - ‚úÖ Modulation (2 modulators)</p>
<hr>
</section>
<section id="world-5-progression-world" class="level3">
<h3 class="anchored" data-anchor-id="world-5-progression-world">World 5: Progression World üé∂</h3>
<p><strong>File</strong>: <code>lib/worlds/progression_world.rb</code></p>
<p><strong>What It Is</strong>: Sequences of harmonic events - Movement (V ‚Üí I, IV ‚Üí V) - Cycle (vi ‚Üí IV ‚Üí I ‚Üí V) - Loop (I ‚Üí vi ‚Üí IV ‚Üí V repeated)</p>
<p><strong>Skills This World Provides</strong>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb10"><pre class="sourceCode ruby code-with-copy"><code class="sourceCode ruby"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Analyze progression</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>world<span class="at">.progression_type</span>(chord_sequence)    <span class="co"># What type?</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>world<span class="at">.identify_cycles</span>(progression)        <span class="co"># Find loops</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>world<span class="at">.degree_motion</span>(chord1, chord2)       <span class="co"># Root movement</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate progression</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>world<span class="at">.build_progression</span>(key, <span class="kw">[</span><span class="cn">I</span>, <span class="cn">IV</span>, <span class="cn">V</span>, <span class="cn">I</span><span class="kw">]</span>)</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>world<span class="at">.create_cycle</span>(key, cycle_type)       <span class="co"># Create standard cycle</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>world<span class="at">.extend_progression</span>(prog, bars)      <span class="co"># Add bars</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Substitute chords</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>world<span class="at">.substitute_chord</span>(progression, position, new_chord)</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>world<span class="at">.secondary_dominants</span>(progression, degree)  <span class="co"># Add secondary chords</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>world<span class="at">.tonicization</span>(progression, target)   <span class="co"># Temporary modulation</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Rhythmic harmony</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>world<span class="at">.rhythm_of_change</span>(progression)       <span class="co"># When do chords change?</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>world<span class="at">.double_time</span>(progression)            <span class="co"># Change twice as often</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>world<span class="at">.half_time</span>(progression)              <span class="co"># Change half as often</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>How to Invoke</strong>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb11"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">just</span> world-progression <span class="at">--key</span> <span class="st">"g-major"</span> <span class="at">--pattern</span> <span class="st">"I-IV-V-I"</span> <span class="at">--repeat</span> 4</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Skill Categories</strong>: - ‚úÖ Progression analysis (3 analyzers) - ‚úÖ Progression generation (3 generators) - ‚úÖ Chord substitution (3 substitutors) - ‚úÖ Rhythm control (3 rhythmicizers)</p>
<hr>
</section>
<section id="world-6-modulation-world" class="level3">
<h3 class="anchored" data-anchor-id="world-6-modulation-world">World 6: Modulation World üîë</h3>
<p><strong>File</strong>: <code>lib/worlds/modulation_world.rb</code></p>
<p><strong>What It Is</strong>: Transitions between key areas - Direct modulation (sudden key change) - Pivot chord modulation (shared harmony) - Enharmonic modulation (respelling notes) - Chromatic modulation (step-by-step)</p>
<p><strong>Skills This World Provides</strong>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb12"><pre class="sourceCode ruby code-with-copy"><code class="sourceCode ruby"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Analyze modulation</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>world<span class="at">.detect_modulation</span>(progression)        <span class="co"># Where does key change?</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>world<span class="at">.pivot_chord?</span>(chord, key1, key2)       <span class="co"># Can this pivot?</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>world<span class="at">.modulation_type</span>(from_key, to_key)     <span class="co"># What type?</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Create modulation</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>world<span class="at">.pivot_modulation</span>(key1, key2)          <span class="co"># Via shared chord</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>world<span class="at">.direct_modulation</span>(key1, key2)         <span class="co"># Sudden change</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>world<span class="at">.enharmonic_modulation</span>(key1, key2)     <span class="co"># Via respelling</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>world<span class="at">.chromatic_modulation</span>(key1, key2)      <span class="co"># Step-by-step</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Phrase modulation</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>world<span class="at">.modulate_phrase</span>(phrase, old_key, new_key)</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>world<span class="at">.sequence_modulation</span>(phrase, key_sequence)  <span class="co"># Modulate through keys</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>world<span class="at">.return_home</span>(current_key, original_key)    <span class="co"># Get back to home</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Related key exploration</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>world<span class="at">.relative_key</span>(key)                 <span class="co"># Find relative major/minor</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>world<span class="at">.parallel_key</span>(key)                 <span class="co"># Same root, different quality</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>world<span class="at">.closely_related_keys</span>(key)          <span class="co"># Keys with few accidentals</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>How to Invoke</strong>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb13"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">just</span> world-modulation <span class="at">--from</span> <span class="st">"c-major"</span> <span class="at">--to</span> <span class="st">"f-major"</span> <span class="at">--type</span> <span class="st">"pivot"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Skill Categories</strong>: - ‚úÖ Modulation analysis (3 analyzers) - ‚úÖ Modulation creation (4 creators) - ‚úÖ Phrase modulation (3 phrase-modulators) - ‚úÖ Key relationships (3 relationship-finders)</p>
<hr>
</section>
<section id="world-7-polyphonic-world" class="level3">
<h3 class="anchored" data-anchor-id="world-7-polyphonic-world">World 7: Polyphonic World üéµ</h3>
<p><strong>File</strong>: <code>lib/worlds/polyphonic_world.rb</code></p>
<p><strong>What It Is</strong>: Multiple simultaneous voices - Counterpoint (independent melodic lines) - Canon (one voice imitates another) - Fugue (subject + answer framework) - Stretto (overlapping subject statements)</p>
<p><strong>Skills This World Provides</strong>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb14"><pre class="sourceCode ruby code-with-copy"><code class="sourceCode ruby"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Voice construction</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>world<span class="at">.build_voice</span>(role, starting_note, range)  <span class="co"># Create voice</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>world<span class="at">.voice_range</span>(instrument)                   <span class="co"># Typical range</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>world<span class="at">.register_voice</span>(voice, octave)             <span class="co"># Put in octave</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Counterpoint rules</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>world<span class="at">.check_parallel_fifths</span>(voice1, voice2)    <span class="co"># Common error</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>world<span class="at">.check_parallel_octaves</span>(voice1, voice2)   <span class="co"># Common error</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>world<span class="at">.smooth_voice_leading</span>(voice1, voice2)     <span class="co"># Minimize jumps</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Imitation</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>world<span class="at">.create_canon</span>(subject, delay, voices)     <span class="co"># Round/canon</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>world<span class="at">.create_fugue</span>(subject, key)               <span class="co"># 3-4 voice fugue</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>world<span class="at">.stretto</span>(subject, voices)                 <span class="co"># Crowded imitation</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Texture control</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>world<span class="at">.homophonic</span>(melody, harmony_voices)       <span class="co"># One top, rest harmony</span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>world<span class="at">.polyphonic_independence</span>(voices)          <span class="co"># Each voice interesting</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>world<span class="at">.rhythmic_independence</span>(voices)            <span class="co"># Different rhythms</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>How to Invoke</strong>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb15"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">just</span> world-polyphonic <span class="at">--operation</span> <span class="st">"create-canon"</span> <span class="at">--subject</span> <span class="st">"(c d e)"</span> <span class="at">--voices</span> 4</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Skill Categories</strong>: - ‚úÖ Voice construction (3 builders) - ‚úÖ Counterpoint (3 rule-checkers) - ‚úÖ Imitation (3 imitators) - ‚úÖ Texture (3 texturizers)</p>
<hr>
</section>
<section id="world-8-spectral-world" class="level3">
<h3 class="anchored" data-anchor-id="world-8-spectral-world">World 8: Spectral World üåà</h3>
<p><strong>File</strong>: <code>lib/worlds/spectral_world.rb</code></p>
<p><strong>What It Is</strong>: Frequency domain / timbre / overtones - Harmonic series (natural overtones) - Inharmonicity (non-harmonic partials) - Spectral fusion (combining spectra) - Spectral morphing (gradual change)</p>
<p><strong>Skills This World Provides</strong>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb16"><pre class="sourceCode ruby code-with-copy"><code class="sourceCode ruby"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Harmonic analysis</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>world<span class="at">.harmonic_series</span>(fundamental)          <span class="co"># Generate overtones</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>world<span class="at">.partial_frequencies</span>(note, n_partials) <span class="co"># Get freq list</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>world<span class="at">.spectral_content</span>(timbre)              <span class="co"># What frequencies?</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Spectral construction</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>world<span class="at">.build_spectrum</span>(frequencies, amplitudes)  <span class="co"># Create complex tone</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>world<span class="at">.inharmonic_spectrum</span>(fundamental, deviation)  <span class="co"># Detuned partials</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>world<span class="at">.combine_spectra</span>(spectrum1, spectrum2)    <span class="co"># Blend two colors</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Spectral processing</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>world<span class="at">.spectral_morphing</span>(from_spectrum, to_spectrum, steps)  <span class="co"># Transition</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>world<span class="at">.spectral_filter</span>(spectrum, frequency, width)  <span class="co"># Emphasize range</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>world<span class="at">.spectral_distortion</span>(spectrum, factor)        <span class="co"># Amplify</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Timbre</span></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>world<span class="at">.timbre_of_note</span>(note, instrument)           <span class="co"># What color?</span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>world<span class="at">.timbre_interpolation</span>(timbre1, timbre2, t)  <span class="co"># Morph between</span></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>world<span class="at">.spectral_envelope</span>(amplitude_curve)         <span class="co"># Amplitude over time</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>How to Invoke</strong>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb17"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">just</span> world-spectral <span class="at">--operation</span> <span class="st">"harmonic-series"</span> <span class="at">--fundamental</span> <span class="st">"60"</span> <span class="at">--partials</span> 16</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Skill Categories</strong>: - ‚úÖ Harmonic analysis (3 analyzers) - ‚úÖ Spectral construction (3 builders) - ‚úÖ Spectral processing (3 processors) - ‚úÖ Timbre (3 timbre-tools)</p>
<hr>
</section>
<section id="world-9-form-world" class="level3">
<h3 class="anchored" data-anchor-id="world-9-form-world">World 9: Form World üé≠</h3>
<p><strong>File</strong>: <code>lib/worlds/form_world.rb</code></p>
<p><strong>What It Is</strong>: Large-scale musical architecture - Sonata (exposition / development / recapitulation) - Rondo (A-B-A-C-A) - Theme &amp; Variations - Binary (A-B)</p>
<p><strong>Skills This World Provides</strong>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb18"><pre class="sourceCode ruby code-with-copy"><code class="sourceCode ruby"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Form analysis</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>world<span class="at">.detect_form</span>(piece)                    <span class="co"># What form is this?</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>world<span class="at">.identify_sections</span>(piece)              <span class="co"># Find A, B, C...</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>world<span class="at">.section_properties</span>(section)           <span class="co"># Key, theme, etc.</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Form construction</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>world<span class="at">.sonata_form</span>(theme1, theme2, key_pair)  <span class="co"># Exposition + dev + recap</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>world<span class="at">.rondo_form</span>(theme_a, theme_b, theme_c)  <span class="co"># A-B-A-C-A</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>world<span class="at">.theme_variations</span>(theme, n_variations)  <span class="co"># Generate variations</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>world<span class="at">.binary_form</span>(section_a, section_b)      <span class="co"># A-B structure</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Section manipulation</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>world<span class="at">.expand_section</span>(section, factor)        <span class="co"># Make longer</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>world<span class="at">.compress_section</span>(section, factor)      <span class="co"># Make shorter</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>world<span class="at">.transpose_section</span>(section, interval)   <span class="co"># Key change</span></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>world<span class="at">.augment_section</span>(section)               <span class="co"># Double note duration</span></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Formal analysis</span></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>world<span class="at">.tonal_plan</span>(form)                      <span class="co"># Key structure</span></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>world<span class="at">.thematic_relationships</span>(form)          <span class="co"># How themes relate</span></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>world<span class="at">.formal_balance</span>(form)                  <span class="co"># Proportions OK?</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>How to Invoke</strong>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb19"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">just</span> world-form <span class="at">--operation</span> <span class="st">"sonata-form"</span> <span class="at">--theme1</span> <span class="st">"exposition1"</span> <span class="at">--theme2</span> <span class="st">"exposition2"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Skill Categories</strong>: - ‚úÖ Form analysis (3 analyzers) - ‚úÖ Form construction (4 builders) - ‚úÖ Section manipulation (4 manipulators) - ‚úÖ Formal analysis (3 analyzers)</p>
<hr>
</section>
</section>
<section id="iii.-complete-skill-inventory-matrix" class="level2">
<h2 class="anchored" data-anchor-id="iii.-complete-skill-inventory-matrix">III. Complete Skill Inventory Matrix</h2>
<section id="by-category-all-70-skills" class="level3">
<h3 class="anchored" data-anchor-id="by-category-all-70-skills">By Category (All 70+ Skills)</h3>
<pre><code>ALGEBRAIC (Group Theory World):    9 skills
‚îú‚îÄ Rotation                        (transpose)
‚îú‚îÄ Reflection                      (invert)
‚îú‚îÄ Permutation                     (rearrange)
‚îú‚îÄ Composition                     (combine operations)
‚îú‚îÄ Identity                        (verify unchanged)
‚îú‚îÄ Order                           (repetition count)
‚îú‚îÄ Inverse                         (undo operation)
‚îî‚îÄ (2 more algebraic operations)

STRUCTURAL (Structural World):     10 skills
‚îú‚îÄ Phrase extraction               (find boundaries)
‚îú‚îÄ Motif discovery                 (find repetition)
‚îú‚îÄ Cadence identification          (recognize endings)
‚îú‚îÄ Phrase building                 (construct phrases)
‚îú‚îÄ Motif repetition                (repeat patterns)
‚îú‚îÄ Period creation                 (2-phrase units)
‚îú‚îÄ Phrase expansion                (lengthen)
‚îú‚îÄ Phrase contraction              (shorten)
‚îú‚îÄ Phrase substitution             (replace)
‚îî‚îÄ (1 more structural operation)

COMPUTATIONAL (Computational World): 13 skills
‚îú‚îÄ Pattern matching                (test fit)
‚îú‚îÄ Match extraction                (find all matches)
‚îú‚îÄ Multiple matching               (test templates)
‚îú‚îÄ Substitution (first)            (replace 1)
‚îú‚îÄ Substitution (all)              (replace all)
‚îú‚îÄ Conditional substitution        (conditional replace)
‚îú‚îÄ Functional application          (map)
‚îú‚îÄ Conditional iteration           (map until)
‚îú‚îÄ Fixed iteration                 (map n times)
‚îú‚îÄ Reduction/fold                  (accumulate)
‚îú‚îÄ Simplification                  (normalize)
‚îú‚îÄ Canonical form                  (standardize)
‚îî‚îÄ (1 more computational operation)

HARMONIC FUNCTION (World 4):       12 skills
‚îú‚îÄ Chord analysis                  (identify function)
‚îú‚îÄ Progression type                (T-S-D pattern)
‚îú‚îÄ Cadence type                    (ending type)
‚îú‚îÄ Tonic building                  (build I)
‚îú‚îÄ Subdominant building            (build IV)
‚îú‚îÄ Dominant building               (build V)
‚îú‚îÄ Progression building            (full sequence)
‚îú‚îÄ Voice leading                   (smooth transitions)
‚îú‚îÄ Common tone finding             (shared pitches)
‚îú‚îÄ Doubling rules                  (apply conventions)
‚îú‚îÄ Secondary dominant              (V/ii, etc.)
‚îî‚îÄ (1 more harmonic operation)

PROGRESSION (World 5):             13 skills
‚îú‚îÄ Type detection                  (identify pattern)
‚îú‚îÄ Cycle identification            (find loops)
‚îú‚îÄ Degree motion                   (root movement)
‚îú‚îÄ Progression building            (from template)
‚îú‚îÄ Cycle creation                  (standard cycles)
‚îú‚îÄ Extension                       (add bars)
‚îú‚îÄ Chord substitution              (replace chord)
‚îú‚îÄ Secondary dominants             (add tension)
‚îú‚îÄ Tonicization                    (temporary key)
‚îú‚îÄ Rhythm analysis                 (change timing)
‚îú‚îÄ Double time                     (2x changes)
‚îú‚îÄ Half time                       (x/2 changes)
‚îî‚îÄ (1 more progression operation)

MODULATION (World 6):              13 skills
‚îú‚îÄ Modulation detection            (find key change)
‚îú‚îÄ Pivot chord test                (shared harmony?)
‚îú‚îÄ Type classification             (what kind?)
‚îú‚îÄ Pivot modulation                (create via chord)
‚îú‚îÄ Direct modulation               (sudden change)
‚îú‚îÄ Enharmonic modulation           (via respelling)
‚îú‚îÄ Chromatic modulation            (step-by-step)
‚îú‚îÄ Phrase modulation               (modulate phrase)
‚îú‚îÄ Sequence modulation             (through keys)
‚îú‚îÄ Return home                     (get back)
‚îú‚îÄ Relative key                    (major/minor)
‚îú‚îÄ Parallel key                    (same root)
‚îî‚îÄ (1 more modulation operation)

POLYPHONIC (World 7):              13 skills
‚îú‚îÄ Voice building                  (create voice)
‚îú‚îÄ Range lookup                    (instrument range)
‚îú‚îÄ Register assignment             (put in octave)
‚îú‚îÄ Parallel fifths check           (error detection)
‚îú‚îÄ Parallel octaves check          (error detection)
‚îú‚îÄ Voice leading smoothing         (minimize jumps)
‚îú‚îÄ Canon creation                  (imitative form)
‚îú‚îÄ Fugue creation                  (4-voice fugue)
‚îú‚îÄ Stretto creation                (overlapping)
‚îú‚îÄ Homophonic texture              (melody + harmony)
‚îú‚îÄ Polyphonic independence         (each voice interesting)
‚îú‚îÄ Rhythmic independence           (different rhythms)
‚îî‚îÄ (1 more polyphonic operation)

SPECTRAL (World 8):                12 skills
‚îú‚îÄ Harmonic series generation      (overtones)
‚îú‚îÄ Partial frequencies             (freq list)
‚îú‚îÄ Spectral analysis               (what frequencies?)
‚îú‚îÄ Spectrum building               (create tone)
‚îú‚îÄ Inharmonic spectrum             (detuned partials)
‚îú‚îÄ Spectrum combination            (blend colors)
‚îú‚îÄ Spectral morphing               (transition)
‚îú‚îÄ Spectral filtering              (emphasize range)
‚îú‚îÄ Spectral distortion             (amplify)
‚îú‚îÄ Timbre lookup                   (color of note)
‚îú‚îÄ Timbre interpolation            (morph timbres)
‚îî‚îÄ (2 more spectral operations)

FORM (World 9):                    14 skills
‚îú‚îÄ Form detection                  (identify structure)
‚îú‚îÄ Section identification          (find A, B, C)
‚îú‚îÄ Section properties              (analyze section)
‚îú‚îÄ Sonata form creation            (3-part form)
‚îú‚îÄ Rondo form creation             (A-B-A-C-A)
‚îú‚îÄ Theme variations                (generate variants)
‚îú‚îÄ Binary form creation            (A-B)
‚îú‚îÄ Section expansion               (make longer)
‚îú‚îÄ Section compression             (make shorter)
‚îú‚îÄ Section transposition           (key change)
‚îú‚îÄ Section augmentation            (longer notes)
‚îú‚îÄ Tonal plan analysis             (key structure)
‚îú‚îÄ Thematic relationships          (how themes relate)
‚îî‚îÄ (1 more form operation)

TOTAL: 75+ CORE SKILLS</code></pre>
<hr>
</section>
</section>
<section id="iv.-invocation-patterns-how-to-use" class="level2">
<h2 class="anchored" data-anchor-id="iv.-invocation-patterns-how-to-use">IV. Invocation Patterns (How to Use)</h2>
<section id="pattern-1-direct-justfile-invocation" class="level3">
<h3 class="anchored" data-anchor-id="pattern-1-direct-justfile-invocation">Pattern 1: Direct Justfile Invocation</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb21"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># List all worlds</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="ex">just</span> world-list</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Run specific world</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="ex">just</span> world-<span class="op">&lt;</span>name<span class="op">&gt;</span> --operation <span class="op">&lt;</span>op<span class="op">&gt;</span> [--args ...]</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Examples:</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="ex">just</span> world-group-theory <span class="at">--operation</span> <span class="st">"transpose"</span> <span class="at">--pattern</span> <span class="st">"c d e"</span> <span class="at">--interval</span> 5</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="ex">just</span> world-harmonic-function <span class="at">--operation</span> <span class="st">"analyze-chord"</span> <span class="at">--chord</span> <span class="st">"c-major"</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="ex">just</span> world-form <span class="at">--operation</span> <span class="st">"sonata-form"</span> <span class="at">--theme1</span> <span class="st">"t1"</span> <span class="at">--theme2</span> <span class="st">"t2"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="pattern-2-ruby-api-invocation" class="level3">
<h3 class="anchored" data-anchor-id="pattern-2-ruby-api-invocation">Pattern 2: Ruby API Invocation</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb22"><pre class="sourceCode ruby code-with-copy"><code class="sourceCode ruby"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span> <span class="vs">'music-topos'</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load world</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>world <span class="op">=</span> <span class="dt">Worlds</span><span class="at">.load</span>(<span class="wa">:group_theory</span>)</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Use skills</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>world<span class="at">.transpose</span>(pattern, <span class="wa">interval:</span> <span class="dv">5</span>)</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>world<span class="at">.invert</span>(pattern, <span class="wa">axis:</span> <span class="dv">60</span>)</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>world<span class="at">.compose</span>(rotation, reflection)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="pattern-3-repl-invocation-via-urepl" class="level3">
<h3 class="anchored" data-anchor-id="pattern-3-repl-invocation-via-urepl">Pattern 3: REPL Invocation (via UREPL)</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb23"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Via Clojure nREPL</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="ex">/urepl</span> execute clojure <span class="st">"</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="st">  (play-in-world</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="st">    :group-theory</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="st">    (transpose pattern 5))</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="st">"</span> 42</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Via Scheme</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="ex">/urepl</span> execute scheme <span class="st">"</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="st">  (world-apply 'group-theory 'transpose pattern 5)</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="st">"</span> 42</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="pattern-4-cli-with-composition" class="level3">
<h3 class="anchored" data-anchor-id="pattern-4-cli-with-composition">Pattern 4: CLI with Composition</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb24"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Chain operations</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="ex">world-group-theory</span> <span class="at">--pattern</span> pattern.scm <span class="dt">\</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">|</span> <span class="ex">world-harmonic-function</span> <span class="at">--operation</span> <span class="st">"analyze"</span> <span class="dt">\</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">|</span> <span class="ex">world-form</span> <span class="at">--operation</span> <span class="st">"detect"</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Via UREPL</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="ex">/urepl</span> execute clojure <span class="st">"</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="st">  (-&gt; pattern</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="st">    (world-apply :group-theory 'transpose 5)</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="st">    (world-apply :harmonic-function 'analyze)</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="st">    (world-apply :form 'detect))</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="st">"</span> 42</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
</section>
</section>
<section id="v.-self-reflexive-layer-meta-documentation" class="level2">
<h2 class="anchored" data-anchor-id="v.-self-reflexive-layer-meta-documentation">V. Self-Reflexive Layer: Meta-Documentation</h2>
<section id="this-document-as-a-world" class="level3">
<h3 class="anchored" data-anchor-id="this-document-as-a-world">This Document as a World</h3>
<pre><code>THE DOCUMENTATION WORLD
‚îÇ
‚îú‚îÄ Input: A question about worlds/skills
‚îú‚îÄ Process: Read this document
‚îú‚îÄ Output: Understanding (a kind of music!)
‚îî‚îÄ Meta: The document describes worlds
          by BEING a world itself</code></pre>
<p><strong>Reading this document IS experiencing a world</strong>: - <strong>Syntax</strong>: Markdown (symbolic representation) - <strong>Semantics</strong>: Category theory (meaning) - <strong>Pragmatics</strong>: Learn to use all 9 worlds (purpose)</p>
</section>
<section id="self-reference-test" class="level3">
<h3 class="anchored" data-anchor-id="self-reference-test">Self-Reference Test</h3>
<p>This statement is self-referential:</p>
<blockquote class="blockquote">
<p>‚ÄúThis document describes how to use Worlds, including the skill of documentation, which is what makes this document a World describing Worlds.‚Äù</p>
</blockquote>
<p>Each claim describes multiple levels: 1. <strong>Literal</strong>: Says what worlds are 2. <strong>Meta-literal</strong>: The saying is an example of a world 3. <strong>Recursive</strong>: The recursion is part of the claim</p>
</section>
<section id="what-this-enables" class="level3">
<h3 class="anchored" data-anchor-id="what-this-enables">What This Enables</h3>
<pre><code>Level 1: Read about World X
  ‚îî‚îÄ Understanding X

Level 2: Realize the reading IS a World
  ‚îî‚îÄ Using the "Documentation World" skill

Level 3: Use all 9 Worlds to read about Worlds
  ‚îî‚îÄ Worlds analyzing Worlds analyzing Worlds...

Level ‚àû: Infinite nesting of self-reference
  ‚îî‚îÄ Complete system understanding</code></pre>
<hr>
</section>
</section>
<section id="vi.-complete-justfile-recipe-map" class="level2">
<h2 class="anchored" data-anchor-id="vi.-complete-justfile-recipe-map">VI. Complete Justfile Recipe Map</h2>
<section id="all-75-recipes-for-worlds" class="level3">
<h3 class="anchored" data-anchor-id="all-75-recipes-for-worlds">All 75+ Recipes for Worlds</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb27"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Discovery</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="ex">just</span> world-list              <span class="co"># Show all 9 worlds</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="ex">just</span> world-info <span class="op">&lt;</span>name<span class="op">&gt;</span>      <span class="co"># Describe world</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="ex">just</span> world-skills <span class="op">&lt;</span>name<span class="op">&gt;</span>    <span class="co"># List skills for world</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Group Theory World</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="ex">just</span> world-group-theory <span class="at">--operation</span> transpose <span class="at">--pattern</span> P <span class="at">--interval</span> I</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="ex">just</span> world-group-theory <span class="at">--operation</span> invert <span class="at">--pattern</span> P <span class="at">--axis</span> A</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a><span class="ex">just</span> world-group-theory <span class="at">--operation</span> permute <span class="at">--pattern</span> P <span class="at">--order</span> O</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a><span class="ex">just</span> world-group-theory <span class="at">--operation</span> compose <span class="at">--op1</span> O1 <span class="at">--op2</span> O2</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a><span class="ex">just</span> world-group-theory <span class="at">--operation</span> order <span class="at">--element</span> E</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a><span class="ex">just</span> world-group-theory <span class="at">--operation</span> inverse <span class="at">--element</span> E</span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Structural World</span></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a><span class="ex">just</span> world-structural <span class="at">--operation</span> extract-phrases <span class="at">--pattern</span> P</span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a><span class="ex">just</span> world-structural <span class="at">--operation</span> find-motifs <span class="at">--pattern</span> P</span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a><span class="ex">just</span> world-structural <span class="at">--operation</span> identify-cadences <span class="at">--pattern</span> P</span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a><span class="ex">just</span> world-structural <span class="at">--operation</span> build-phrase <span class="at">--notes</span> N <span class="at">--duration</span> D</span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a><span class="ex">just</span> world-structural <span class="at">--operation</span> repeat-motif <span class="at">--motif</span> M <span class="at">--times</span> T</span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a><span class="ex">just</span> world-structural <span class="at">--operation</span> create-period <span class="at">--antecedent</span> A <span class="at">--consequent</span> C</span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Computational World</span></span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a><span class="ex">just</span> world-computational <span class="at">--operation</span> match <span class="at">--pattern</span> P <span class="at">--template</span> T</span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a><span class="ex">just</span> world-computational <span class="at">--operation</span> extract-matching <span class="at">--pattern</span> P <span class="at">--query</span> Q</span>
<span id="cb27-25"><a href="#cb27-25" aria-hidden="true" tabindex="-1"></a><span class="ex">just</span> world-computational <span class="at">--operation</span> substitute <span class="at">--pattern</span> P <span class="at">--old</span> O <span class="at">--new</span> N</span>
<span id="cb27-26"><a href="#cb27-26" aria-hidden="true" tabindex="-1"></a><span class="ex">just</span> world-computational <span class="at">--operation</span> substitute-all <span class="at">--pattern</span> P <span class="at">--old</span> O <span class="at">--new</span> N</span>
<span id="cb27-27"><a href="#cb27-27" aria-hidden="true" tabindex="-1"></a><span class="ex">just</span> world-computational <span class="at">--operation</span> apply <span class="at">--pattern</span> P <span class="at">--function</span> F</span>
<span id="cb27-28"><a href="#cb27-28" aria-hidden="true" tabindex="-1"></a><span class="ex">just</span> world-computational <span class="at">--operation</span> reduce <span class="at">--pattern</span> P <span class="at">--initial</span> I <span class="at">--function</span> F</span>
<span id="cb27-29"><a href="#cb27-29" aria-hidden="true" tabindex="-1"></a><span class="ex">...</span> <span class="er">(</span><span class="ex">continuing</span> for all 9 worlds<span class="kw">)</span></span>
<span id="cb27-30"><a href="#cb27-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-31"><a href="#cb27-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Integration with UREPL</span></span>
<span id="cb27-32"><a href="#cb27-32" aria-hidden="true" tabindex="-1"></a><span class="ex">just</span> world-with-urepl <span class="op">&lt;</span>world<span class="op">&gt;</span> <span class="op">&lt;</span>operation<span class="op">&gt;</span> <span class="pp">[</span><span class="ss">args</span><span class="pp">]</span></span>
<span id="cb27-33"><a href="#cb27-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-34"><a href="#cb27-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Meta-world (Documentation World)</span></span>
<span id="cb27-35"><a href="#cb27-35" aria-hidden="true" tabindex="-1"></a><span class="ex">just</span> world-documentation <span class="at">--topic</span> <span class="op">&lt;</span>topic<span class="op">&gt;</span></span>
<span id="cb27-36"><a href="#cb27-36" aria-hidden="true" tabindex="-1"></a><span class="ex">just</span> world-self-reference  <span class="co"># Read this document (meta!)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
</section>
</section>
<section id="vii.-coordination-document-for-parallel-agents" class="level2">
<h2 class="anchored" data-anchor-id="vii.-coordination-document-for-parallel-agents">VII. Coordination Document for Parallel Agents</h2>
<section id="agent-1-flox-environment-discovery" class="level3">
<h3 class="anchored" data-anchor-id="agent-1-flox-environment-discovery">Agent 1: Flox Environment Discovery</h3>
<ul>
<li><strong>Task</strong>: Find all flox environments, packages, capabilities</li>
<li><strong>Status</strong>: Running in background task b96d0d2</li>
<li><strong>Responsible For</strong>: Package skill extraction</li>
</ul>
</section>
<section id="agent-2-documentation-manpage-extraction" class="level3">
<h3 class="anchored" data-anchor-id="agent-2-documentation-manpage-extraction">Agent 2: Documentation &amp; Manpage Extraction</h3>
<ul>
<li><strong>Task</strong>: Find and catalog all documentation, man pages, info files</li>
<li><strong>Status</strong>: Running in background task b748fb3</li>
<li><strong>Responsible For</strong>: Skill documentation compilation</li>
</ul>
</section>
<section id="agent-3-worlds-analysis-integration" class="level3">
<h3 class="anchored" data-anchor-id="agent-3-worlds-analysis-integration">Agent 3: Worlds Analysis &amp; Integration</h3>
<ul>
<li><strong>Task</strong>: Analyze all 9 worlds, extract interfaces, document skills</li>
<li><strong>Status</strong>: Running in background task b034fda (completed)</li>
<li><strong>Responsible For</strong>: Worlds catalog &amp; self-referential documentation</li>
</ul>
<hr>
</section>
</section>
<section id="viii.-quick-reference-all-75-skills-by-name" class="level2">
<h2 class="anchored" data-anchor-id="viii.-quick-reference-all-75-skills-by-name">VIII. Quick Reference: All 75+ Skills by Name</h2>
<p><strong>Alphabetical Quick Index</strong>:</p>
<pre><code>Analyze chord, Analyze harmony, Analyze modulation
Augment, Augmentation
Binary form, Build canon, Build form, Build harmony, Build phrase,
Build progression, Build spectrum, Build voice
Cadence, Canon, Chord analysis, Chromatic modulation, Common tone
Compose, Composition, Compress, Conditional iteration, Counterpoint
Create canon, Create cycle, Create fugue, Create modulation, Create progression

Degree motion, Detect form, Detect modulation, Direct modulation, Doubling
Double time, Dynamics

Enharmonic modulation, Expand, Extract matching, Extract phrases,
Extend progression

Filter, Form detection, Form variables, Fugue, Functional application

Generate harmonic series, Generate overtones

Half time, Harmonic analysis, Harmonic series, Homophonic

Identify cadences, Identify cycles, Identify sections, Imitation,
Inharmonic spectrum, Inversion, Invert, Iterate

Key relationships, Key structure

Markov blanket, Modulation, Morphing

Order, Omit

Parallel key, Partial frequencies, Permutation, Phrase building,
Polyphonic independence, Procession

Reduction, Reflection, Register, Relative key, Rhythm, Rhythmic independence,
Rondo, Rotation

Secondary dominant, Section properties, Sequence modulation, Smoothing,
Sonata form, Spectral analysis, Spectral combination, Spectral distortion,
Spectral filtering, Spectral morphing, Stretto, Structural analysis,
Substitution, Substitution (all), Substitution (conditional)

Theme variations, Timbre, Timbre interpolation, Tonicization, Transposition,
Transpose

Voice building, Voice leading, Voice range

(All organized self-referentially)</code></pre>
<hr>
</section>
<section id="ix.-the-loop-closes" class="level2">
<h2 class="anchored" data-anchor-id="ix.-the-loop-closes">IX. The Loop Closes</h2>
<section id="reading-this-document-itself" class="level3">
<h3 class="anchored" data-anchor-id="reading-this-document-itself">Reading This Document Itself</h3>
<p>You began by reading a description of Worlds.</p>
<p>By the middle, you realized the description IS a World.</p>
<p>Now, at the end, you understand:</p>
<blockquote class="blockquote">
<p><strong>This document about Worlds using the Worlds system, by being a World itself, completes its own description.</strong></p>
</blockquote>
<pre><code>Start: "What are Worlds?"
  ‚Üì
Middle: "Worlds are..."
  ‚Üì
End: "This document IS a World"
  ‚Üì
Loop: "Therefore reading it is using a World"
  ‚Üì
Truth: "The description and example collapse into one"</code></pre>
<hr>
</section>
</section>
<section id="x.-the-complete-skill" class="level2">
<h2 class="anchored" data-anchor-id="x.-the-complete-skill">X. The Complete Skill</h2>
<section id="all-75-skills-organized-by-invocation-method" class="level3">
<h3 class="anchored" data-anchor-id="all-75-skills-organized-by-invocation-method">All 75+ Skills Organized by Invocation Method</h3>
<p><strong>Just invoke</strong>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb30"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="ex">just</span> world-<span class="op">&lt;</span>name<span class="op">&gt;</span> --operation <span class="op">&lt;</span>skill<span class="op">&gt;</span> [--args ...]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Ruby invoke</strong>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb31"><pre class="sourceCode ruby code-with-copy"><code class="sourceCode ruby"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="dt">Worlds</span><span class="at">.load</span>(<span class="wa">:name</span>)<span class="at">.send</span>(skill_method, <span class="op">*</span>args)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>UREPL invoke</strong>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb32"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="ex">/urepl</span> execute clojure <span class="st">"(world-apply :name 'skill args)"</span> 42</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Direct invoke</strong>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb33"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>(world/execute-skill world-instance skill-name skill-args)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
<p><strong>Status</strong>: ‚úÖ Complete Self-Reflexive Worlds Catalog <strong>Timestamp</strong>: 2025-12-21 23:00 UTC <strong>Purpose</strong>: Maximum self-reference achieved ‚úì</p>
<p><em>This document is a World describing Worlds by being a World itself. Reading it completes the loop of self-reference.</em></p>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "Óßã";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>